<?php

return [
    /*
    |--------------------------------------------------------------------------
    | 经验值升级表（每级所需总经验）
    |--------------------------------------------------------------------------
    */
    'experience_table' => [
        // 第1-10级 - 新手阶段
        1 => 0,
        2 => 100,
        3 => 250,
        4 => 500,
        5 => 1000,
        6 => 2000,
        7 => 4000,
        8 => 8000,
        9 => 16000,
        10 => 32000,
        // 第11-20级 - 初级阶段
        11 => 50000,
        12 => 75000,
        13 => 105000,
        14 => 140000,
        15 => 180000,
        16 => 225000,
        17 => 275000,
        18 => 330000,
        19 => 390000,
        20 => 455000,
        // 第21-30级 - 中级阶段
        21 => 525000,
        22 => 600000,
        23 => 680000,
        24 => 765000,
        25 => 855000,
        26 => 950000,
        27 => 1050000,
        28 => 1155000,
        29 => 1265000,
        30 => 1380000,
        // 第31-40级 - 高级阶段
        31 => 1500000,
        32 => 1625000,
        33 => 1755000,
        34 => 1890000,
        35 => 2030000,
        36 => 2175000,
        37 => 2325000,
        38 => 2480000,
        39 => 2640000,
        40 => 2805000,
        // 第41-50级 - 精英阶段
        41 => 2975000,
        42 => 3150000,
        43 => 3330000,
        44 => 3515000,
        45 => 3705000,
        46 => 3900000,
        47 => 4100000,
        48 => 4305000,
        49 => 4515000,
        50 => 4730000,
        // 第51-60级 - 大师阶段
        51 => 4950000,
        52 => 5175000,
        53 => 5405000,
        54 => 5640000,
        55 => 5880000,
        56 => 6125000,
        57 => 6375000,
        58 => 6630000,
        59 => 6890000,
        60 => 7155000,
        // 第61-70级 - 传奇阶段
        61 => 7425000,
        62 => 7700000,
        63 => 7980000,
        64 => 8265000,
        65 => 8555000,
        66 => 8850000,
        67 => 9150000,
        68 => 9455000,
        69 => 9765000,
        70 => 10080000,
        // 第71-80级 - 神话阶段
        71 => 10400000,
        72 => 10725000,
        73 => 11055000,
        74 => 11390000,
        75 => 11730000,
        76 => 12075000,
        77 => 12425000,
        78 => 12780000,
        79 => 13140000,
        80 => 13505000,
        // 第81-90级 - 半神阶段
        81 => 13875000,
        82 => 14250000,
        83 => 14628000,
        84 => 15012000,
        85 => 15402000,
        86 => 15798000,
        87 => 16200000,
        88 => 16608000,
        89 => 17022000,
        90 => 17442000,
        // 第91-100级 - 神阶段
        91 => 17868000,
        92 => 18300000,
        93 => 18738000,
        94 => 19182000,
        95 => 19632000,
        96 => 20088000,
        97 => 20550000,
        98 => 21018000,
        99 => 21492000,
        100 => 21972000,
    ],

    // 经验表未定义等级时的兜底：每级所需经验 = level * 该值
    'experience_fallback_per_level' => 5000,

    // 每级属性点奖励
    'stat_points_per_level' => 1,

    // 每级技能点数
    'skill_points_per_level' => 1,

    /*
    |--------------------------------------------------------------------------
    | 职业基础属性（创建角色时的初始四维）
    |--------------------------------------------------------------------------
    */
    'class_base_stats' => [
        'warrior' => [
            'strength' => 3,
            'dexterity' => 1,
            'vitality' => 3,
            'energy' => 1,
        ],
        'mage' => [
            'strength' => 1,
            'dexterity' => 2,
            'vitality' => 1,
            'energy' => 3,
        ],
        'ranger' => [
            'strength' => 2,
            'dexterity' => 3,
            'vitality' => 2,
            'energy' => 2,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | 生命值计算（基础值 + 体力 * 系数）
    |--------------------------------------------------------------------------
    */
    'hp' => [
        'base' => [
            'warrior' => 20,
            'mage' => 10,
            'ranger' => 15,
            'default' => 15,
        ],
        'vitality_multiplier' => 5,
    ],

    /*
    |--------------------------------------------------------------------------
    | 法力值计算（基础值 + 能量 * 系数）
    |--------------------------------------------------------------------------
    */
    'mana' => [
        'base' => [
            'warrior' => 10,
            'mage' => 20,
            'ranger' => 15,
            'default' => 15,
        ],
        // 最大法力 = base[职业] + 能量属性 × energy_multiplier
        'energy_multiplier' => 3,
    ],

    /*
    |--------------------------------------------------------------------------
    | 难度倍率（普通/困难/高手/大师/痛苦1-6）
    | 怪物生命、怪物伤害、金币与经验分别使用对应加成。
    |--------------------------------------------------------------------------
    */
    'difficulty_multipliers' => [
        0 => ['monster_hp' => 1.0, 'monster_damage' => 1.0, 'reward' => 1.0],       // 普通
        1 => ['monster_hp' => 3.0, 'monster_damage' => 2.3, 'reward' => 1.75],      // 困难
        2 => ['monster_hp' => 4.3, 'monster_damage' => 2.69, 'reward' => 2.0],     // 高手
        3 => ['monster_hp' => 6.45, 'monster_damage' => 3.2, 'reward' => 3.0],    // 大师
        4 => ['monster_hp' => 9.98, 'monster_damage' => 3.85, 'reward' => 4.0],    // 痛苦1
        5 => ['monster_hp' => 15.82, 'monster_damage' => 4.71, 'reward' => 5.0],  // 痛苦2
        6 => ['monster_hp' => 25.46, 'monster_damage' => 5.82, 'reward' => 6.5],   // 痛苦3
        7 => ['monster_hp' => 41.36, 'monster_damage' => 7.28, 'reward' => 9.0],   // 痛苦4
        8 => ['monster_hp' => 67.59, 'monster_damage' => 9.16, 'reward' => 12.5],  // 痛苦5
        9 => ['monster_hp' => 110.88, 'monster_damage' => 11.6, 'reward' => 17.0], // 痛苦6
    ],

    /*
    |--------------------------------------------------------------------------
    | 怪物类型倍率（普通/精英/Boss，用于属性与掉落计算）
    |--------------------------------------------------------------------------
    */
    'monster_type_multipliers' => [
        'normal' => 1,
        'elite' => 2.5,
        'boss' => 5,
    ],

    /*
    |--------------------------------------------------------------------------
    | 装备槽位
    |--------------------------------------------------------------------------
    */
    'slots' => [
        'weapon',
        'helmet',
        'armor',
        'gloves',
        'boots',
        'belt',
        'ring',
        'amulet',
    ],

    /*
    |--------------------------------------------------------------------------
    | 战斗属性计算（攻击/防御/暴击）
    |--------------------------------------------------------------------------
    | 敏捷 (dexterity) 在战斗中的用途：
    | - 攻击：仅游侠以敏捷为主属性（见 attack.ranger），其他职业不参与攻击计算。
    | - 防御：全职业参与，防御 = 体力×vitality_multiplier + 敏捷×dexterity_multiplier。
    | - 暴击率：全职业参与，基础暴击 = 敏捷×dexterity_multiplier，总暴击率有 cap 上限。
    | 暴击封顶后敏捷仍可提升防御（及游侠攻击），部分装备有 required_dexterity 穿戴需求。
    |--------------------------------------------------------------------------
    */
    'combat' => [
        // 怪物属性刷新间隔（秒），定期从数据库重新读取怪物属性
        'monster_refresh_interval' => env('COMBAT_MONSTER_REFRESH_INTERVAL', 60),
        // 攻击：每职业主属性及倍数（战士力量、游侠敏捷、法师能量）
        'attack' => [
            'warrior' => ['stat' => 'strength', 'multiplier' => 2],
            'ranger' => ['stat' => 'dexterity', 'multiplier' => 2],
            'mage' => ['stat' => 'energy', 'multiplier' => 2],
            'default' => ['stat' => 'strength', 'multiplier' => 2],
        ],
        // 防御：体力与敏捷系数
        'defense' => [
            'vitality_multiplier' => 0.5,
            'dexterity_multiplier' => 0.3,
        ],
        // 暴击率：敏捷系数，每点敏捷增加 dexterity_multiplier（如 0.01 = 1%）；cap 为总暴击率上限。
        // 达到 cap 后，敏捷再堆也不会提高暴击率；若希望敏捷长期有用可提高 cap 或设为 1.0 取消上限。
        'crit_rate' => [
            'dexterity_multiplier' => 0.002,
            'cap' => 0.30,
        ],
        // 暴击伤害：基础倍率（1.5 = 150%）
        'crit_damage' => [
            'base' => 1.5,
        ],
    ],

    /*
    |--------------------------------------------------------------------------
    | 物品品质概率（掉落时的品质判定）
    |--------------------------------------------------------------------------
    | 从高到低依次判断，roll 值 0-100
    | 配置的概率之和应 <= 100，剩余为 common 品质
    */
    'item_quality_chances' => [
        'mythic' => 0.01,
        'legendary' => 0.1,
        'rare' => 1,
        'magic' => 18.89,
        // 剩余 80% 为 common
    ],

    /*
    |--------------------------------------------------------------------------
    | 铜币掉落配置
    |--------------------------------------------------------------------------
    | 怪物死亡时的铜币掉落概率与数量范围
    */
    'copper_drop' => [
        // 掉落概率（0-1），例如 0.5 = 50%
        'chance' => 0.1,
        // 基础铜币数量（每次掉落至少给这么多）
        'base' => 1,
        // 随机额外铜币范围（在 base 基础上额外随机 0~range）
        'range' => 10,
    ],

    /*
    |--------------------------------------------------------------------------
    | 战斗计算配置
    |--------------------------------------------------------------------------
    */
    // 战斗计算补充配置（合并到上方的 'combat' 配置中以避免重复键）
    'combat_calculation' => [
        'defense_reduction' => 0.5,
        'aoe_damage_multiplier' => 0.7,
        'monster_defense_reduction' => 0.3,
    ],

    /*
    |--------------------------------------------------------------------------
    | 离线收益配置
    |--------------------------------------------------------------------------
    */
    'offline_rewards' => [
        // 最大离线时间（秒），默认24小时
        'max_seconds' => 86400,
        // 每级每秒经验值
        'experience_per_level' => 1,
        // 每级每秒铜币系数
        'copper_per_level' => 0.5,
    ],

    /*
    |--------------------------------------------------------------------------
    | 商店配置
    |--------------------------------------------------------------------------
    */
    'shop' => [
        // 回收价格系数 (售价 = 购买价 × 该系数)
        'sell_ratio' => 0.3,
        // 商店刷新装备数量范围
        'equipment_count_min' => 20,
        'equipment_count_max' => 25,
        // 装备等级价格系数 (价格 = 基础价格 × (1 + 等级 × 该系数))
        'level_price_multiplier' => 0.5,
        // 品质价格乘数
        'quality_price_multiplier' => [
            'mythic' => 2.5,
            'legendary' => 2.0,
            'rare' => 1.6,
            'magic' => 1.3,
            'common' => 1.0,
        ],
        // 基础价格（按装备类型）
        'type_base_price' => [
            'potion' => 10,
            'weapon' => 50,
            'helmet' => 30,
            'armor' => 40,
            'gloves' => 20,
            'boots' => 20,
            'belt' => 25,
            'ring' => 35,
            'amulet' => 45,
        ],
        // 属性价格计算系数
        'stat_price' => [
            'attack' => 5,
            'defense' => 4,
            'max_hp' => 0.5,
            'max_mana' => 0.5,
            'crit_rate' => 100,
            'crit_damage' => 2,
            'strength' => 10,
            'dexterity' => 10,
            'vitality' => 10,
            'energy' => 10,
            'all_stats' => 40,
        ],
        // 商店刷新装备品质概率（基于需求等级）
        // 格式: [品质 => [基础概率, 每级增加]]
        'quality_chance' => [
            'mythic' => ['base' => 0, 'per_level' => 0.2, 'max' => 21],
            'legendary' => ['base' => 0, 'per_level' => 0.5, 'max' => 26],
            'rare' => ['base' => 15, 'per_level' => 0, 'max' => 41],
            'magic' => ['base' => 30, 'per_level' => 0, 'max' => 71],
        ],
    ],
];
